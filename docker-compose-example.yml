services:
  game_of_neighborhoods:
    build:
      context: ./docker
      dockerfile: Dockerfile
      args:
        AUTORUN_ENABLED: "false"
        APP_ENV: ${APP_ENV}
    container_name: ${APP_HOSTNAME}
    hostname: ${APP_HOSTNAME}
    environment:
      PUID: 1000
      SSL_MODE: "mixed"
    volumes:
      - ./:/var/www/html
    ports:
      - "8010:80"
      - "8110:443"
    networks:
      - game_of_neighborhoods
    healthcheck:
      test:
        [
          "CMD-SHELL",
          "wget --no-verbose --Âºtries=1 --spider http://localhost || exit 1",
        ]
      interval: 5m
      timeout: 3s
      retries: 3

networks:
  game_of_neighborhoods:
    external: true
